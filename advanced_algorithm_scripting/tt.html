<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title></title>
  </head>
  <body>
    <script type="text/javascript">
    function checkCashRegister(price, cash, cid) {
   var change;
   var sumCid = 0;

 // Here is your change, ma'am.

   //找零(change)，付款(cash)，购买价格(price)，收银机中零钱(cid   change = cash - price
  //计算零钱总额   for (var i = 0; i < cid.length; i++) {
     sumCid += cid[i][1];
   }
   sumCid = Number(sumCid.toFixed(2));  //保留两位小数

   if (sumCid < change) {
     return 'Insufficient Funds';  //余额不足
   } else if (sumCid === change) {
     return "Closed";
   } else {
       // 1.零钱不够,返回余额不足
       // 2.零钱足够,找回零钱
       return overChange(change, cid, sumCid);
   }
 }

 function overChange(change, arr, sumCid) {
   var array = [];
   var len = arr.length;

   for (var i = len - 1; i >= 0; i--) {
       if (arr[i][1] === 0) continue;

       if (arr[i][1] < change) {
         array.push(arr[i]);
       change -= arr[i][1];
       change = Number(change.toFixed(2));
       }

       else if (arr[i][1] > change) {
       var x = arr[i][0];  // 取得零钱名称
         var y = 0;

         switch(x) {
           case "ONE HUNDRED":
             y = Math.floor(change / 100) * 100;
             break;
           case "TWENTY":
             y = Math.floor(change / 20) * 20;             break;
          case "TEN":
             y = Math.floor(change / 10) * 10;
             break;
           case "FIVE":
               y = Math.floor(change / 5) * 5;
               break;
             case "ONE":
               y = Math.floor(change / 1);
               break;
             case "QUARTER":
               y = Math.floor(change / 0.25) * 0.25;
               break;
             case "DIME":
               y = Math.floor(change / 0.10) * 0.10;
               break;
             case "NICKEL":
               y = Math.floor(change / 0.05) * 0.05;
               break;
             case "PENNY":
               y = Math.floor(change / 0.01) * 0.01;
               break;
        }

         if (y === 0 && sumCid - arr[i][1] < change) {
         return "Insufficient Funds";
         }

         else if (y === 0) {
           continue;
         }

         else {
             if (y < 1) {
               y = y;
             }
         var array1 = [];
           array1.push(arr[i][0]);
           array1.push(y);
           array.push(array1);
         change -= y;
         change = Number(change.toFixed(2));
       }
       }
   }

   if (change === 0) {
       return array;
   } else {
       return "Insufficient Funds";
   }

 }

 checkCashRegister(19.50, 20.00, [["PENNY", 1.01], ["NICKEL", 2.05], ["DIME", 3.10], ["QUARTER", 4.25], ["ONE", 90.00], ["FIVE", 55.00], ["TEN", 20.00], ["TWENTY", 60.00], ["ONE HUNDRED", 100.00]]);
    </script>
  </body>
</html>
